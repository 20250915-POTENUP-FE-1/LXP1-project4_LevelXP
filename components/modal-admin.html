<!-- 관리자페이지 모달  -->
<link rel="stylesheet" href="/css/board.css">
<link rel="stylesheet" href="/css/modal-admin.css">

<div id="editModal" class="edit-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>강의 정보 수정</h3>
      <button class="modal-close">&times;</button>
    </div>
    <form id="lecture" class="modal-form">
      <input type="hidden" id="edit-lecture-index">

      <div class="cate">
        <select name="" class="input" title="분류선택">
          <option value="">분류선택</option>
          <option value="">Fe typescript</option>
          <option value="">Fe next-js</option>
          <option value="">Fe react</option>
          <option value="">be java</option>
          <option value="">be php</option>
          <option value="">be python</option>
        </select>
      </div>

      <div class="form-group img-wrap">
        <label for="upfile">첨부파일</label>
        <div id="files-upload" class="files-upload">
          <div class="files-upload-group">
            <div class="files-upload-input">
              <input type="file" name="upfiles[]" class="input form-input" id="upfile" title="첨부파일" accept="image/*">
              <div class="preview-wrap" id="preview-wrap"></div>
              <div class="files-upload-btns">
                <a href="javascript:removeFile();" class="btn-pack delete">삭제</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="edit-lecture-name">강의명</label>
        <input type="text" id="edit-lecture-name" class="form-input" required>
      </div>
       <div class="form-group">
        <label for="edit-lecture-instructor">강사명</label>
        <input type="text" id="edit-lecture-instructor" class="form-input" required>
      </div>
      <div class="form-group">
        <label for="edit-lecture-price">가격</label>
        <input type="number" id="edit-lecture-price" class="form-input" required>
      </div>
      <div class="form-group">
        <label for="edit-lecture-cop">회사명</label>
        <input type="number" id="edit-lecture-cop" class="form-input" required>
      </div>
      <div class="modal-actions">
        <button type="button" class="cancel-btn">취소</button>
        <button type="submit" class="save-btn">저장</button>
      </div>
    </form>
  </div>
</div>

<script>
  const fileInput = document.getElementById('upfile');
  const previewWrap = document.getElementById('preview-wrap');

  // 파일 선택 시 이미지 미리보기 표시
  fileInput.addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (!file) return;

    // 이미지 파일인지 확인
    if (!file.type.startsWith('image/')) {
      alert('이미지 파일만 선택 가능합니다.');
      fileInput.value = ''; // 초기화
      return;
    }

    // 기존 이미지 미리보기 삭제 후 새로 추가
    previewWrap.innerHTML = '';

    const reader = new FileReader();
    reader.onload = function(e) {
      const img = document.createElement('img');
      img.src = e.target.result;
      img.alt = '미리보기 이미지';
      img.style.maxWidth = '200px';
      img.style.marginTop = '10px';
      img.style.display = 'block';
      img.style.border = '1px solid #ddd';
      img.style.borderRadius = '8px';
      previewWrap.appendChild(img);
    };
    reader.readAsDataURL(file);
  });

  // 삭제 버튼 클릭 시 이미지 및 파일 입력 초기화
  function removeFile() {
    fileInput.value = '';
    previewWrap.innerHTML = '';
  }
</script>
